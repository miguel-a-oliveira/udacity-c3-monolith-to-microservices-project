# Apply env variables and secrets
kubectl apply -f ./configurations/aws-secret.yaml
kubectl apply -f ./configurations/env-secret.yaml
kubectl apply -f ./configurations/env-configmap.yaml

# Deployments - Double check the Dockerhub image name and version in the deployment files
kubectl apply -f configurations/api-feed-deployment.yaml
kubectl apply -f configurations/api-user-deployment.yaml
kubectl apply -f configurations/frontend-deployment.yaml
kubectl apply -f configurations/reverseproxy-deployment.yaml

# Service
kubectl apply -f configurations/api-feed-service.yaml
kubectl apply -f configurations/api-user-service.yaml
kubectl apply -f configurations/frontend-service.yaml
kubectl apply -f configurations/reverseproxy-service.yaml

# Check deployment names and their pod status
kubectl get deployments

# check service names
kubectl get svc

#Create a service object that exposes the frontend and reverseproxy deployment
kubectl expose deployment frontend --type=LoadBalancer --name=publicfrontend

kubectl expose deployment reverseproxy --type=LoadBalancer --name=publicreverseproy
